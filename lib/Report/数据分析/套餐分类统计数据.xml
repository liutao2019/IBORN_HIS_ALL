<ReportQueryInfo Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.ReportQueryInfo,SOC.HISFC.OutpatientFee.Components"><List><List Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryControl,SOC.HISFC.OutpatientFee.Components"><Index>0</Index><Name>dtBeginTime</Name><Text>开始时间：</Text><IsAddText>true</IsAddText><ControlType Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.ControlType.DateTimeType,SOC.HISFC.OutpatientFee.Components"><AddDays>-1</AddDays><AddMonths>0</AddMonths><CustomFormat>yyyy-MM-dd</CustomFormat><DefaultDataSource></DefaultDataSource><Format>Custom</Format><IsLike>false</IsLike><LikeStr>%{0}%</LikeStr><Size Type="System.Drawing.Size,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Width>120</Width><Height>20</Height></Size><Location Type="System.Drawing.Point,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><X>10</X><Y>2</Y></Location><QueryDataSource>Dictionary</QueryDataSource><DataSourceTypeName></DataSourceTypeName><Enabled>true</Enabled></ControlType></List><List Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryControl,SOC.HISFC.OutpatientFee.Components"><Index>1</Index><Name>dtEndTime</Name><Text>结束时间：</Text><IsAddText>true</IsAddText><ControlType Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.ControlType.DateTimeType,SOC.HISFC.OutpatientFee.Components"><AddDays>0</AddDays><AddMonths>0</AddMonths><CustomFormat>yyyy-MM-dd</CustomFormat><DefaultDataSource></DefaultDataSource><Format>Custom</Format><IsLike>false</IsLike><LikeStr>%{0}%</LikeStr><Size Type="System.Drawing.Size,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Width>120</Width><Height>20</Height></Size><Location Type="System.Drawing.Point,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><X>220</X><Y>2</Y></Location><QueryDataSource>Dictionary</QueryDataSource><DataSourceTypeName></DataSourceTypeName><Enabled>true</Enabled></ControlType></List></List><QueryDataSource><QueryDataSource Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryDataSource,SOC.HISFC.OutpatientFee.Components"><Name>dgCusInfo</Name><Sql>select * from (
  select '套餐量' A, name 套餐，count(name) 数量 ---,sum(real_cost)/10000 套餐收入
  from ( select p.patient_name,p.card_no, (case when name like '综-%' then  '综合门诊'  when b.package_name like '%女性健康%' then '女性健康' when b.package_name like '%价疫苗服务%' then '妇科疫苗'  
         when (b.package_name like '%婴儿泳疗%'or b.package_name like '%浮潜%' or b.package_name like '%水上特护%') then '游泳系列' when b.package_name like '%无忧经典%' then '无忧经典'  
         when b.package_name like '%疫苗服务费(单次)%' then '儿保单次疫苗' when (b.package_name like '疫苗服务费1%' or b.package_name like '%儿保+疫苗服务%') then '儿保疫苗综合'  ELSE name END) name,p.package_id,b.package_name,p.real_cost,p.delimiting_date from exp_package p
         inner join bd_com_package b on b.package_id = p.package_id
         inner join com_dictionary d on d.code = b.package_kind and d.type = 'PACKAGETYPE'
         where p.cancel_flag = '0' and p.delimiting_date &gt;= to_date('&amp;dtBeginTime','YYYY-MM-DD') and p.delimiting_date &lt; to_date('&amp;dtEndTime','YYYY-MM-DD') )
  where  1 = 1 
  group  by name   
  ) a  
  pivot  (sum(数量) for 套餐 in ('产检套餐'产检,'分娩套餐'分娩,'SG套餐' SG,'女性健康'女性健康,'妇科疫苗'妇科疫苗,'盆底肌套餐'盆底,'私密套餐'私密,'月子套餐'月子套餐,'居家月子'居家月子,'法国LPG套餐'LPG,
  '游泳系列'游泳系列,'无忧经典'无忧经典,'儿保单次疫苗'儿保单次疫苗,'儿保疫苗综合'儿保疫苗综合,'儿保套餐'儿保套餐,'综合门诊'综合门诊)) 
  union 
  select * from (
  select '套餐收入',name 套餐，sum(real_cost)/10000 套餐收入
  from ( select p.patient_name,p.card_no, (case when name like '综-%' then  '综合门诊'  when b.package_name like '%女性健康%' then '女性健康' when b.package_name like '%价疫苗服务%' then '妇科疫苗'  
         when (b.package_name like '%婴儿泳疗%'or b.package_name like '%浮潜%' or b.package_name like '%水上特护%') then '游泳系列' when b.package_name like '%无忧经典%' then '无忧经典'  
         when b.package_name like '%疫苗服务费(单次)%' then '儿保单次疫苗' when (b.package_name like '疫苗服务费1%' or b.package_name like '%儿保+疫苗服务%') then '儿保疫苗综合'  ELSE name END) name,p.package_id,b.package_name,p.real_cost,p.delimiting_date from exp_package p
         inner join bd_com_package b on b.package_id = p.package_id
         inner join com_dictionary d on d.code = b.package_kind and d.type = 'PACKAGETYPE'
         where p.cancel_flag = '0' and p.delimiting_date &gt;= to_date('&amp;dtBeginTime','YYYY-MM-DD') and p.delimiting_date &lt; to_date('&amp;dtEndTime','YYYY-MM-DD') )
  where  1 = 1 
  group  by name  
  ) b  
  pivot  (sum(套餐收入) for 套餐 in ('产检套餐'产检,'分娩套餐'分娩,'SG套餐' SG,'女性健康'女性健康,'妇科疫苗'妇科疫苗,'盆底肌套餐'盆底,'私密套餐'私密,'月子套餐'月子套餐,'居家月子'居家月子,'法国LPG套餐'LPG,
  '游泳系列'游泳系列,'无忧经典'无忧经典,'儿保单次疫苗'儿保单次疫苗,'儿保疫苗综合'儿保疫苗综合,'儿保套餐'儿保套餐,'综合门诊'综合门诊)) </Sql><AddMapRow>true</AddMapRow><AddMapColumn>true</AddMapColumn><AddMapData>true</AddMapData><AddMapSourceData>true</AddMapSourceData><IsCross>false</IsCross><SqlType>MainReportUsing</SqlType><CrossRows></CrossRows><CrossColumns></CrossColumns><CrossValues></CrossValues><CrossCombinColumns></CrossCombinColumns><SumColumns></SumColumns><CrossGroupColumns></CrossGroupColumns><IsSumRow>true</IsSumRow><SumRows></SumRows><RowGroup /></QueryDataSource></QueryDataSource><QueryFilePath>Report\数据分析\套餐分类统计数据.xml</QueryFilePath><PrintInfo Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.PrintInfo,SOC.HISFC.OutpatientFee.Components"><PaperSize Type="System.Drawing.Printing.PaperSize,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Height>1169</Height><PaperName>A4</PaperName><RawKind>0</RawKind><Width>850</Width></PaperSize><SelectPage>false</SelectPage></PrintInfo></ReportQueryInfo>