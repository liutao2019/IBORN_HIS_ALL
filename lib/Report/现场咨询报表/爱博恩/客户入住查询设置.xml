<ReportQueryInfo Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.ReportQueryInfo,SOC.HISFC.OutpatientFee.Components"><List><List Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryControl,SOC.HISFC.OutpatientFee.Components"><Index>0</Index><Name>dtBeginTime</Name><Text>开始时间：</Text><IsAddText>true</IsAddText><ControlType Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.ControlType.DateTimeType,SOC.HISFC.OutpatientFee.Components"><AddDays>0</AddDays><AddMonths>-1</AddMonths><CustomFormat>yyyy-MM-dd</CustomFormat><DefaultDataSource></DefaultDataSource><Format>Custom</Format><IsLike>false</IsLike><LikeStr>%{0}%</LikeStr><Size Type="System.Drawing.Size,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Width>120</Width><Height>20</Height></Size><Location Type="System.Drawing.Point,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><X>0</X><Y>0</Y></Location><QueryDataSource>Dictionary</QueryDataSource><DataSourceTypeName></DataSourceTypeName><Enabled>true</Enabled></ControlType></List><List Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryControl,SOC.HISFC.OutpatientFee.Components"><Index>1</Index><Name>dtEndTime</Name><Text>结束时间：</Text><IsAddText>true</IsAddText><ControlType Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.ControlType.DateTimeType,SOC.HISFC.OutpatientFee.Components"><AddDays>0</AddDays><AddMonths>0</AddMonths><CustomFormat>yyyy-MM-dd</CustomFormat><DefaultDataSource></DefaultDataSource><Format>Custom</Format><IsLike>false</IsLike><LikeStr>%{0}%</LikeStr><Size Type="System.Drawing.Size,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Width>120</Width><Height>20</Height></Size><Location Type="System.Drawing.Point,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><X>200</X><Y>0</Y></Location><QueryDataSource>Dictionary</QueryDataSource><DataSourceTypeName></DataSourceTypeName><Enabled>true</Enabled></ControlType></List><List Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryControl,SOC.HISFC.OutpatientFee.Components"><Index>2</Index><Name>cmbFloor</Name><Text>楼层</Text><IsAddText>true</IsAddText><ControlType Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.ControlType.ComboBoxType,SOC.HISFC.OutpatientFee.Components"><IsAddAll>true</IsAddAll><AllValue Type="FS.FrameWork.Models.NeuObject,FrameWork"><ID>ALL</ID><Name>全部</Name><Memo></Memo></AllValue><DataSource /><DefaultDataSource /><IsLike>false</IsLike><LikeStr>%{0}%</LikeStr><Size Type="System.Drawing.Size,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Width>120</Width><Height>20</Height></Size><Location Type="System.Drawing.Point,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><X>450</X><Y>0</Y></Location><QueryDataSource>Sql</QueryDataSource><DataSourceTypeName>  select '6','五楼' from dual union select '11','十一楼' from dual union select '12','十二楼' from dual union select '13','十三楼' from dual union select '14','十四楼' from dual union select '15','十五楼' from dual union select 'VIP6','VIP6' from dual union select 'VIP8','VIP8' from dual</DataSourceTypeName><Enabled>true</Enabled></ControlType></List></List><QueryDataSource><QueryDataSource Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.QueryDataSource,SOC.HISFC.OutpatientFee.Components"><Name>dgvBedInfo</Name><Sql>select  r.patientname 姓名,r.patientid 卡号,
  --case  when f.nurse_cell_code in( '3015', '3016') then '产康套餐' when f.nurse_cell_code in( '3011' , '3012') then '月子套餐' when f.patient_type = 'L' then '留观' ELSE '分娩套餐' END 套餐类型,
  case  r.packagetype when '1' then '分娩' when '2' then '月子' else '其他' end 类型,
  --substr(f.bed_no,5,3) 房间,
  r.roomno 房间, 
  to_char(r.indate,'yyyy-mm-dd') 入住日期, to_char(r.outdate,'yyyy-mm-dd') 转出日期,('&amp;dtBeginTime'||'至'||'&amp;dtEndTime') 查询区间,
  case when r.indate &lt; to_date('&amp;dtBeginTime','YYYY-MM-DD') and r.outdate &lt;= to_date('&amp;dtEndTime','YYYY-MM-DD')+ 1 then trunc(r.outdate) - to_date('&amp;dtBeginTime','YYYY-MM-DD') + 1  
       when r.indate &lt; to_date('&amp;dtBeginTime','YYYY-MM-DD') and r.outdate &gt; to_date('&amp;dtEndTime','YYYY-MM-DD')+ 1  then to_date('&amp;dtEndTime','YYYY-MM-DD') - to_date('&amp;dtBeginTime','YYYY-MM-DD') + 1
      
       when r.indate &gt;= to_date('&amp;dtBeginTime','YYYY-MM-DD')and r.outdate &gt; to_date('&amp;dtEndTime','YYYY-MM-DD')+ 1  then to_date('&amp;dtEndTime','YYYY-MM-DD') - trunc(r.indate) + 1 
       when r.indate &gt;= to_date('&amp;dtBeginTime','YYYY-MM-DD')and r.outdate &lt;= to_date('&amp;dtEndTime','YYYY-MM-DD')+ 1 then trunc(r.outdate) - trunc(r.indate) + 1   
       ELSE 0  end 期间天数
  from  iborn_roomorder r 
  ---from   fin_ipr_inmaininfo f
  where  1 = 1
  ---and    f.in_state &lt;&gt; 'N' 
  ---and    f.patient_no not like 'B%' and f.nurse_cell_code not in('3002')
  and    (decode(substr(r.roomno,1,3),'VIP',r.roomno,decode(length(r.roomno),3,substr(r.roomno,1,1),substr(r.roomno,1,2)))  = '&amp;cmbFloor' or '&amp;cmbFloor' = 'ALL')
  --and    (f.in_date between to_date('&amp;dtBeginTime','YYYY-MM-DD')  and to_date('&amp;dtEndTime','YYYY-MM-DD') + 1  or f.in_date between to_date('&amp;dtBeginTime','YYYY-MM-DD')  and to_date('&amp;dtEndTime','YYYY-MM-DD') + 1 )  
  and    (r.outdate between to_date('&amp;dtBeginTime','YYYY-MM-DD') and to_date('&amp;dtEndTime','YYYY-MM-DD')  
      or r.indate between to_date('&amp;dtBeginTime','YYYY-MM-DD')  and to_date('&amp;dtEndTime','YYYY-MM-DD')  
      or （r.indate &lt;  to_date('&amp;dtBeginTime','YYYY-MM-DD')  and  r.outdate &gt; to_date('&amp;dtBeginTime','YYYY-MM-DD')))  

  order  by 房间,入住日期</Sql><AddMapRow>false</AddMapRow><AddMapColumn>true</AddMapColumn><AddMapData>true</AddMapData><AddMapSourceData>false</AddMapSourceData><IsCross>false</IsCross><SqlType>MainReportUsing</SqlType><CrossRows></CrossRows><CrossColumns></CrossColumns><CrossValues></CrossValues><CrossCombinColumns></CrossCombinColumns><SumColumns></SumColumns><CrossGroupColumns></CrossGroupColumns><IsSumRow>true</IsSumRow><SumRows></SumRows><RowGroup /></QueryDataSource></QueryDataSource><QueryFilePath>Report\现场咨询报表\爱博恩\客户入住查询设置.xml</QueryFilePath><PrintInfo Type="FS.SOC.HISFC.OutpatientFee.Components.Report.Common.Setting.PrintInfo,SOC.HISFC.OutpatientFee.Components"><PaperSize Type="System.Drawing.Printing.PaperSize,System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"><Height>1169</Height><PaperName>A4</PaperName><RawKind>0</RawKind><Width>850</Width></PaperSize><SelectPage>false</SelectPage></PrintInfo></ReportQueryInfo>